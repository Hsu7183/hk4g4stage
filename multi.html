<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <title>三劍客台指期策略分析（批量版）</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="toolbar">
      <label class="btn primary">選擇多個檔案
        <input type="file" id="filesInput" accept=".txt,.TF" hidden multiple />
      </label>
      <button id="btn-clear" class="btn">清空結果</button>
      <span id="loadStat" class="badge" style="display:none"></span>
    </div>

    <div class="parambar" id="paramBar" hidden>
      <span class="name" id="pName"></span>
      <span class="params" id="pParams"></span>
    </div>

    <div class="row">
      <div class="card2">
        <h3>第一列收益曲線</h3>
        <canvas id="equityChart"></canvas>
      </div>
      <div class="card2">
        <h3>第一列交易紀錄</h3>
        <table class="table">
          <thead>
            <tr>
              <th>筆數</th><th>進場時間</th><th>進場價</th>
              <th>出場時間</th><th>出場價</th><th>方向</th>
              <th>點數</th><th>手續費</th><th>期交稅</th>
              <th>獲利</th><th>累積獲利</th><th>滑價獲利</th><th>累積滑價獲利</th>
            </tr>
          </thead>
          <tbody id="tradesBody"><tr><td colspan="13" style="color:#777">尚未載入</td></tr></tbody>
        </table>
      </div>
    </div>

    <div class="card2">
      <h3>彙總結果</h3>
      <div style="color:#6b7280;font-size:.92rem;margin-bottom:6px">TXT 第一行若為參數則自動識別；載入後，點擊上方表頭可排序，排序完成後會切換第一列視圖。</div>
      <table id="tblBatch" class="table">
        <thead></thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="card2">
      <h3>第一列數值彙整（全部 / 多單 / 空單）</h3>
      <div id="kpiBlocks" class="kpi-wrap"></div>
    </div>
  </div>

  <script src="app-multi.js"></script>
</body>
</html>
