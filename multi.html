<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <title>三劍客台指期策略分析（批量版）</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>
  <script src="shared.js"></script>
</head>
<body>
  <header>
    <h1>三劍客台指期策略分析（批量版）</h1>
    <div class="btn-group">
      <label class="btn primary">選擇多個檔案
        <input id="pickFiles" type="file" accept=".txt,.TF" hidden multiple />
      </label>
      <button id="btnClear" class="btn">清空結果</button>
    </div>
  </header>

  <div class="top-grid">
    <section class="card">
      <h3 style="margin:.2rem 0 8px;">第一列收益曲線</h3>
      <div class="chart-wrap" style="margin:0"><canvas id="curve"></canvas></div>
    </section>

    <section class="card">
      <h3 style="margin:.2rem 0 8px;">第一列交易紀錄</h3>
      <div style="overflow:auto;max-height:560px;">
        <table>
          <thead>
            <tr>
              <th>筆數</th><th>進場時間</th><th>進場價</th><th>類型</th>
              <th>出場時間</th><th>出場價</th><th>類型</th>
              <th>點數</th><th>手續費</th><th>期交稅</th>
              <th>獲利</th><th>累積獲利</th><th>滑價獲利</th><th>累積滑價獲利</th>
            </tr>
          </thead>
          <tbody id="topTradesBody"><tr><td colspan="14">尚未載入</td></tr></tbody>
        </table>
      </div>
    </section>
  </div>

  <section class="card" style="max-width:1200px;margin:12px auto;">
    <div style="color:#666">TXT 第一行若為參數則自動跳過；載入後，上方表頭可排序，排序完成後會切換第一列視圖。</div>
  </section>

  <section class="card" style="max-width:1200px;margin:12px auto;">
    <h3 style="margin:.2rem 0 8px;">彙總結果</h3>
    <div style="overflow:auto;">
      <table>
        <thead>
          <tr>
            <th style="text-align:left">檔名</th>
            <th>交易數</th>
            <th>累積獲利</th>
          </tr>
        </thead>
        <tbody id="resultBody"></tbody>
      </table>
    </div>
  </section>

  <script src="app-multi.js"></script>
</body>
</html>
