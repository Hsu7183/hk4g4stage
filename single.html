<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <title>三劍客台指期策略分析（單檔）</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body{background:#f5f6f8}
    header, .sub, .chart-wrap, .kpi-wrap, .table-wrap {max-width:1200px; margin:1rem auto; padding:0 1rem}
    header{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}
    h1{margin:0;font-size:1.45rem}
    .btn-group{display:flex;gap:.6rem}
    .btn{display:inline-flex;align-items:center;padding:.55rem 1.05rem;border:1px solid #e5e7eb;border-radius:.6rem;background:#fff;cursor:pointer;box-shadow:0 8px 20px rgba(0,0,0,.06)}
    .btn.primary{background:#2563eb;color:#fff;border-color:transparent}
    .box{background:#fff;border:1px solid #e5e7eb;border-radius:.6rem;box-shadow:0 8px 20px rgba(0,0,0,.06);padding:.7rem}
    .chart-wrap .box{height:420px}
    #equityChart{width:100%!important;height:100%!important}
    .hint{color:#666;font-size:.9rem;margin:.4rem 0 0}
    .error{color:#b91c1c;background:#fee2e2;border:1px solid #fecaca;border-radius:.5rem;padding:.5rem .7rem;margin:.6rem 0;display:none}
    /* KPI */
    #topKPI.box{padding:1rem}
    .kpi-block{margin:.5rem 0 .8rem}
    .kpi-title{font-weight:800;margin:.2rem 0 .5rem}
    .kpi-line{display:flex;flex-wrap:wrap;gap:1rem .9rem}
    .kpi-item{white-space:nowrap;font-size:.95rem}
    .kpi-key{color:#374151}
    .kpi-val{font-weight:700}
    /* 表格 */
    .table-wrap table{width:100%;border-collapse:collapse;font-size:.88rem;background:#fff;border:1px solid #e5e7eb}
    th,td{padding:.5rem .4rem;border-bottom:1px solid #e5e7eb;text-align:center}
    thead th{background:#fafafa;position:sticky;top:0}
    tbody tr:nth-child(even){background:#fbfbfd}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <header>
    <h1>三劍客台指期策略分析（單檔）</h1>
    <div class="btn-group">
      <button id="btn-clip" class="btn primary">貼上內容</button>
      <label class="btn primary" id="pick">選擇檔案
        <input type="file" id="fileInput" accept=".txt,.TF" hidden />
      </label>
    </div>
  </header>

  <div class="chart-wrap">
    <div class="box"><canvas id="equityChart"></canvas></div>
    <div id="errBox" class="error"></div>
    <div class="hint">提示：可貼上或選擇 1 個 TXT；會顯示收益曲線、KPI 與交易紀錄。</div>
  </div>

  <div class="kpi-wrap">
    <div id="topKPI" class="box">
      <h2 class="sub" style="margin:.2rem 0 .6rem">數值彙整（全部／多單／空單）</h2>
      <div id="kpiBlocks"></div>
    </div>
  </div>

  <h2 class="sub">交易紀錄</h2>
  <div class="table-wrap">
    <table id="tbl" hidden>
      <thead>
        <tr>
          <th>筆數</th><th>時間</th><th>價格</th><th>類型</th>
          <th>點數</th><th>手續費</th><th>期交稅</th>
          <th>獲利</th><th>累積獲利</th>
          <th>滑價獲利</th><th>累積滑價獲利</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script defer src="single.js?v=2025-08-10b"></script>
</body>
</html>
